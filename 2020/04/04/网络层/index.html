<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hoo334.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="本文为复习计算机网络整理的资料。">
<meta property="og:type" content="article">
<meta property="og:title" content="网络层">
<meta property="og:url" content="https://hoo334.github.io/2020/04/04/%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="echo">
<meta property="og:description" content="本文为复习计算机网络整理的资料。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/04/04/2S4LzoC5UadXEVb.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/ms5cGHWLrvOjZJX.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/YOFb4qsouhinm6T.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/FZVzXlYEQIjDyxP.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/orCBvgIw8smXcWj.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/ev5FiWZCnjNrbsV.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/EBMz9khK71uWvjy.png">
<meta property="og:image" content="https://i.loli.net/2020/04/04/SQFZdbVO8KBNiDj.png">
<meta property="og:image" content="https://i.loli.net/2020/04/11/rPoZzSghkIDjyR6.png">
<meta property="article:published_time" content="2020-04-04T06:39:13.000Z">
<meta property="article:modified_time" content="2020-05-07T03:44:57.285Z">
<meta property="article:author" content="hoo334">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/04/04/2S4LzoC5UadXEVb.png">

<link rel="canonical" href="https://hoo334.github.io/2020/04/04/%E7%BD%91%E7%BB%9C%E5%B1%82/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>网络层 | echo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="echo" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">echo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">任生命穿梭 时间的角落 </p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://hoo334.github.io/2020/04/04/%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.jpg">
      <meta itemprop="name" content="hoo334">
      <meta itemprop="description" content="To be a better man">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="echo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网络层
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-04 14:39:13" itemprop="dateCreated datePublished" datetime="2020-04-04T14:39:13+08:00">2020-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-07 11:44:57" itemprop="dateModified" datetime="2020-05-07T11:44:57+08:00">2020-05-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          
            <div class="post-description">本文为复习计算机网络整理的资料。</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="网络层的功能"><a href="#网络层的功能" class="headerlink" title="网络层的功能"></a><strong>网络层的功能</strong></h3><h4 id="异构网络互联"><a href="#异构网络互联" class="headerlink" title="异构网络互联"></a>异构网络互联</h4><p>　　网络互联：将两个以上的计算机网络，通过一定的方法，用一种或多种通信处理设备（中间设备）连接起来。</p>
<p>　　中继设备分以下四种：</p>
<p>　　1）物理层中继设备：中继器，集线器。</p>
<p>　　2）数据链路层中继设备：网桥或交换机。</p>
<p>　　3）网络层中继设备：路由器。</p>
<p>　　4）网络层以上的中继设备：网关。</p>
<p>　　使用物理层的中继设备时，只是把一个网络扩大了，从网络层的角度看仍是同一个网络。网络互联通常指用路由器进行网络互联和路由选择。</p>
<p>　　TCP/IP 体系在网络互联上采用的做法是在网络层采用标准化协议，相互连接的网络可以是异构的。</p>
<p>　　</p>
<h4 id="路由与转发"><a href="#路由与转发" class="headerlink" title="路由与转发"></a>路由与转发</h4><p>　　路由器主要完成两个功能：一是路由选择（确定哪一条路径），二是分组转发（当一个分组到达时采取的动作）。前者是根据特定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断更新和维护路由表。后者处理通过路由器的数据流，关键操作是转发表查询、转发及相关地队列管理和任务调度等。</p>
<p>　　1）路由选择：按照复杂的分布式算法，根据相邻路由器所得到地关于整个网络拓扑的变化情况，动态地选择路由。</p>
<p>　　2）分组转发：指路由器按照转发表将用户的 IP 数据报从合适的端口转发出去。</p>
<p>　　</p>
<h4 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h4><p>　　因出现过量的分组而引起网络性能下降的现象称为拥塞。拥塞控制的作用是确保子网能够承载所达到的流量。</p>
<p>　　流量控制：抑制发送端的发送数据速率。</p>
<p>　　拥塞控制方法：</p>
<p>​        1）开环控制。在设计网络时事先将有关发生拥塞的因素考虑到。</p>
<p>​        2）闭环控制。采用检测系统监视。</p>
<h3 id="路由算法"><a href="#路由算法" class="headerlink" title="路由算法"></a><strong>路由算法</strong></h3><h4 id="静态路由与动态路由"><a href="#静态路由与动态路由" class="headerlink" title="静态路由与动态路由"></a>静态路由与动态路由</h4><p>​        静态路由算法（非自适应路由算法）。指由网络管理员手工配置的路由信息。</p>
<p>​        动态路由算法（自适应路由算法）。路由器上的路由表项是通过相互连接的路由器之间彼此交换信息，然后按照一定的算法优化出来的。</p>
<p>　　</p>
<h4 id="距离-向量路由算法"><a href="#距离-向量路由算法" class="headerlink" title="距离-向量路由算法"></a>距离-向量路由算法</h4><p>　　在距离-向量路由算法中所有结点定期地将它们的整个路由选择表传送给所有与之相连的结点。这种路由表包含：1）每条路径的目的地（另一结点）；2）路径的代价（也称距离）。RIP中将距离定义为跳数–从源端口到目的端口的路由器个数。<strong>“好消息传的快，坏消息传的慢”</strong></p>
<p>　　</p>
<h4 id="链路状态路由算法"><a href="#链路状态路由算法" class="headerlink" title="链路状态路由算法"></a>链路状态路由算法</h4><p>　　链路状态路由算法要求每个参与该算法的结点都具有完全的网络拓扑信息。它们执行下述两项任务：1）主动测试所有邻接结点的状态。2）定期地将链路状态传播给所有其他结点。典型的链路状态算法是OSPF算法。</p>
<p>　　链路状态路由算法有3个特征：</p>
<p>　　1）向本自治系统中所有路由器发送信息，治理使用的方法是洪泛法，路由器通过所有端口向所有相邻的路由器发送信息。每个相邻的路由器又将信息发往所有其他的路由器。</p>
<p>　　2)发送的信息是与路由器相邻的所有路由器的链路状态，但这只是路由器所知道的部分信息。</p>
<p>　　3）只有当链路状态发生变化时，路由器才向所有路由器发送此消息。</p>
<h4 id="层次路由"><a href="#层次路由" class="headerlink" title="层次路由"></a>层次路由</h4><p>　　因特网把路由选择协议分为两大类：</p>
<p>　　1）一个自治系统内部所使用的路由选择协议称为内部网关协议（IGP），也称域内路由选择，具体的协议有RIP 和OSPF 等。</p>
<p>　　2）自治系统之间所使用的路由选择协议称为外部网关协议（EGP），也称域间路由选择，用在不同自治系统的路由器之间交换路由信息。具体的协议有BGP。</p>
<h3 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a><strong>IPv4</strong></h3><h4 id="IPv4分组"><a href="#IPv4分组" class="headerlink" title="IPv4分组"></a>IPv4分组</h4><p><img src="https://i.loli.net/2020/04/04/2S4LzoC5UadXEVb.png" alt="img"></p>
<p> 　一个IP分组由首部和数据两部分组成。首部前一部分长度固定，共20B。</p>
<p>　　1）版本。占4位。IP版本，目前使用4。</p>
<p>　　2）首部长度。占4位。<strong>以4B为单位</strong>，最大值为60B（4位最多表示15），最常用20B。</p>
<p>　　3）总长度。占16位。指首部和数据部分的总长度，<strong>单位为字节</strong>，所以最长65535B。</p>
<p>　　4）标识。占16位。它是一个计数器，每产生一个数据报就加1，并赋值给标识字段。</p>
<p>　　5）标志。占3位。X DF MF 共三位。<strong>DF=0表示可以分片。MF=1表示后面还有分片</strong>。</p>
<p>　　6）片偏移。占13位。它指出较长的分组在分片后，某片在原分组中的相对位置。<strong>以8B为单位</strong>。每个分片的长度一定是8B的整数倍。</p>
<p>　　7）首部校验和。占16位。只校验分组的首部，不校验数据部分。</p>
<p>　　8）生存时间（TTL）。占8位。数据段在网络中可通过的路由器的最大值。</p>
<p>　　9）协议。占8位指出分组携带的数据使用何种协议，6 代表 TCP，17 代表UDP。</p>
<p>　　10）源地址字段。占4B，标识发送方的IP地址。</p>
<p>　　11）目的地址字段。占4B，标识接收方的IP地址。</p>
<p>　　</p>
<p>　　分片例子：</p>
<p><img src="https://i.loli.net/2020/04/04/ms5cGHWLrvOjZJX.png" alt="img"></p>
<p> 　网络层转发分组的流程：</p>
<p>　　1）从首部中取出目的主机的IP地址 D，得出目的网络地址N。</p>
<p>　　2）若网络N与此路由器直接相连，把数据报直接交付给目的主机D。否则间接交付执行3。</p>
<p>　　3）若路由表中有目的地址为D的特定主机路由，把数据报传到下一跳路由器。否则执行4。</p>
<p>　　4）若路由表中有到达网络N的路由器，传给下一跳路由器，否则执行5。</p>
<p>　　5）若路由表中有一个默认路由，把数据报传给默认路由，否则执行6。</p>
<p>　　6）报告转发分组出错。</p>
<p>　　总结：检查接收主机是否与发送主机在同一局域网内–》 检查是否可以通过下一跳路由器直达接收主机 –》 检查是否可以通过下一跳路由器到达另一个路由器（可到达目的主机）–》报错。</p>
<p>　　注意：得到下一跳路由器IP地址后不是直接将下一跳路由器的IP之间填入IP数据报首部。而是将其封装在帧中，改变帧的接收MAC地址。通过这个MAC地址找到下一跳路由器。<strong>在不同网络中传送时，MAC帧中的源地址和目的地址要发生变化，网桥在转发帧时，不改变帧的源地址。</strong></p>
<p>　　</p>
<h4 id="IPv4地址与NAT"><a href="#IPv4地址与NAT" class="headerlink" title="IPv4地址与NAT"></a>IPv4地址与NAT</h4><h5 id="IPv4-地址"><a href="#IPv4-地址" class="headerlink" title="IPv4 地址"></a>IPv4 地址</h5><p>　　连接到因特网上的每台主机或路由器都分配一个32比特的全球唯一标识符，即IP地址。传统的IP地址是分类的地址，分为A，B，C，D，E五类。</p>
<p><img src="https://i.loli.net/2020/04/04/YOFb4qsouhinm6T.png" alt="img"></p>
<p>　　<strong>IP地址=网络号+主机号</strong></p>
<p>　　 特殊用途的IP地址：</p>
<p>　　a.主机号全0表示网络本身。</p>
<p>　　b.主机号全1表示网络的广播地址。</p>
<p>　　c. 127.0.0.0 保留为环路自检地址，此地址表示任意主机本身。</p>
<p>　　d.32位全为0，0.0.0.0表示本网络上的本主机</p>
<p>　　e.32位全为1 255.255.255.255 表示整个TCP/IP网络的广播地址，又称受限广播地址。</p>
<p><img src="https://i.loli.net/2020/04/04/FZVzXlYEQIjDyxP.png" alt="img"></p>
<h5 id="网络地址转换"><a href="#网络地址转换" class="headerlink" title="网络地址转换"></a>网络地址转换</h5><p>　　网络地址转换（NAT）是指将专用网络地址（如Internet）转换为公用地址（ 如Internet）。它使整个专用网只需一个全球IP地址就可以与因特网连通。工作在传输层。</p>
<p>　　一个典型NAT 转换表 WAN 138.76.29.7：5001 ；LAN 192.168.0.2：2233。NAT 工作在传输层。</p>
<p>　　私有IP地址只用于LAN，不用于WAN连接。私有IP网段如下：</p>
<p>　　A类：1个A类网段，<strong>10</strong>.0.0.0 ~ <strong>10</strong>.255.255.255.255</p>
<p>　　B类：16个B类网段，<strong>172.16</strong>.0.0 ~ <strong>172.31</strong>.255.255</p>
<p>　　C类：256个C类网段，<strong>192.168.0</strong>.0~<strong>192.168.255</strong>.255</p>
<h4 id="子网划分与子网掩码、CIDR"><a href="#子网划分与子网掩码、CIDR" class="headerlink" title="子网划分与子网掩码、CIDR"></a>子网划分与子网掩码、CIDR</h4><h5 id="子网划分"><a href="#子网划分" class="headerlink" title="子网划分"></a>子网划分</h5><p>　　子网划分纯属一个单位内部的事情，对外仍然表现为没有划分子网的网络。仅仅是把主机号这部分再进行划分。</p>
<h5 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h5><p>　　子网验码是一个与IP地址相对应的、长32bit的二进制串，由一串1和一串0组成。1对应网络号和子网号，0对应主机号。</p>
<p>　　</p>
<p>　　使用子网验码的分组转发如下：</p>
<p>　　a.从首部中取出目的主机的IP地址 D。</p>
<p>　　b.对<strong>路由器直接相连的网络</strong>逐个检查，用各网络的子网验码和D逐位做与操作，如果结果等于该网络的网络号，直接交付，否则间接交付执行c。</p>
<p>　　c.若路由表中有目的地址为D的特定主机路由，把数据报传到下一跳路由器。否则执行d。</p>
<p>　　d.检查路由表中每一行，如果子网掩码与D的与操作结果与目的网络地址网络号相同则传给下一跳路由器，否则执行e。</p>
<p>　　e.若路由表中有一个默认路由，把数据报传给默认路由，否则执行f。</p>
<p>　　f.报告转发分组出错。</p>
<p>　　总结：检查接收主机是否与发送主机在同一局域网内–》 检查是否可以通过下一跳路由器直达接收主机 –》 检查是否有默认路由–》报错。</p>
<h5 id="无分类域间路由选择（CIDR）"><a href="#无分类域间路由选择（CIDR）" class="headerlink" title="无分类域间路由选择（CIDR）"></a>无分类域间路由选择（CIDR）</h5><p>　　CIDR使用“网络前缀”的概念代替子网的概念。</p>
<p>　　<strong>CIDR使用斜线计法 IP地址/网络前缀占用比特数。</strong></p>
<h4 id="ARP、DHCP与ICMP"><a href="#ARP、DHCP与ICMP" class="headerlink" title="ARP、DHCP与ICMP"></a>ARP、DHCP与ICMP</h4><p>　　1）IP地址与硬件地址</p>
<p>　　IP地址由于路由器的隔离不能进行广播，这时候就只能通过数据链路层的MAC地址以广播方式寻址。</p>
<p>　　2）地址解析协议（ARP）</p>
<p>　　IP到MAC地址的映射，这就是地址解析协议（Address Resolution Protocol，ARP）。</p>
<p>　　<strong>ARP工作在网络层，先查看ARP缓存，如果没有目的IP对应的MAC地址则使用目的MAC地址为ff-ff-ff-ff-ff-ff的帧来封装并广播ARP请求分组。</strong>目的主机收到该 ARP 请求后向源主机发出 ARP 响应分组。</p>
<p>　　3）动态主机配置协议（DHCP）</p>
<p>　　动态主机配置协议（Dynamic Host Configuration Protocol，DHCP）常用于给主机动态地分配IP地址，提供了即插即用地机制，允许一台计算机加入新的网络和获取IP地址。DHCP是<strong>应用层</strong>协议，它是基于UDP的。</p>
<p>　　4）网际控制报文协议（ICMP）</p>
<p>　　为了提高IP数据报交付成功的机会，在网络层使用了网际控制报文协议（Internet Control Message Protocol，ICMP）来让主机或路由器报告差错和异常情况。ICMP报文作为IP数据报的数据，加上数据报的首部，组成IP数据报发送出去。</p>
<p>　　ICMP报文有两种 ICMP差错报文和ICMP询问报文。</p>
<p>　　ICMP差错报文5种类型：</p>
<p>　　1）终点不可达。路由器或主机不能交付数据报。</p>
<p>　　2）源点抑制。路由器或主机由于拥塞丢弃数据报。</p>
<p>　　3）时间超过。路由器收到TTL=0的数据报。</p>
<p>　　4）参数问题。路由器或主机收到数据报中首部字段值不正确。</p>
<p>　　5）改变路由（重定向）。路由器把改变路由报文发送给主机。</p>
<p>　　不发送ICMP 差错报文的情况：</p>
<p>　　1）对ICMP 差错报文不发送。</p>
<p>　　2）对第一个分片的数据报片后续所有数据报片都不发送。</p>
<p>　　3）对组播地址的数据报不发送。</p>
<p>　　4)对具有特殊地址的数据报不发送。</p>
<p>　　</p>
<p>　　ICMP询问报文有4种类型：回送请求和回答报文、时间戳请求和回答报文、掩码地址请求和回答报文、路由器询问和通告报文。</p>
<p>　　<strong>ICMP的常见应用是分组间探测PING，PING使用了ICMP会送请求和回答报文。PING工作在应用层，直接使用网络层的ICMP回送请求和回答报文。</strong></p>
<h3 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h3><h4 id="IPv6-特点"><a href="#IPv6-特点" class="headerlink" title="IPv6 特点"></a>IPv6 特点</h4><p>　　1）IPv6共128位，2）简化了IP分组头3）更好地支持选项</p>
<p>　　</p>
<h4 id="IPv6-地址"><a href="#IPv6-地址" class="headerlink" title="IPv6 地址"></a>IPv6 地址</h4><p>　　IPv6 数据报的目的地址可以是 单播、多播和组播。</p>
<p>　　IPv4 向IPv6 过渡可以采用双协议栈和隧道技术两种策略。双协议栈是指在一台设备上同时装有IPv4 和IPv6 协议栈。隧道技术是将整个IPv6数据报封装到IPv4的数据部分。</p>
<h3 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h3><h4 id="自治系统"><a href="#自治系统" class="headerlink" title="自治系统"></a>自治系统</h4><p>　　自治系统（Automatic System，AS）单一技术管理下的一组路由器。</p>
<p>　　</p>
<h4 id="域内路由和域间路由"><a href="#域内路由和域间路由" class="headerlink" title="域内路由和域间路由"></a>域内路由和域间路由</h4><p>　　1）内部网关协议（Internal Gateway Protocol，IGP）：在一个自治系统内部使用的路由选择协议。如 RIP、OSPF。</p>
<p>　　2） 外部网关协议（External Gateway Protocol，EGP）：自治系统之间的路由选择协议。如BGP-4。</p>
<p>　　</p>
<h4 id="路由信息协议（RIP）"><a href="#路由信息协议（RIP）" class="headerlink" title="路由信息协议（RIP）"></a>路由信息协议（RIP）</h4><p>　　网络中的每个路由器维护从它自身到每个目的网络的距离记录。RIP距离最大为15，超过15代表不可达。RIP默认在任意两个使用RIP的路由器之间每30秒广播一次RIP路由更新信息，以便自动建立并维护路由表。RIP中每个网络的子网掩码必须相同。</p>
<p>　　RIP 的特点：</p>
<p>　　1）仅和相邻路由器交换信息。</p>
<p>　　2）路由器交换的信息是当前路由器所知道的全部信息，即自己的额路由表。</p>
<p>　　3）按固定的时间间隔交换路由器信息，如每隔30秒。</p>
<p>　　</p>
<p>　　距离向量算法：</p>
<p>　　每个路由表都有三个关键数据：&lt;目的网络N，距离d，下一跳路由器X&gt;</p>
<p>　　1）对每个相邻路由器中发过来的RIP报文，先修改所有的项目，把“下一跳”字段中的地址都改为 X，并把所有“距离”字段加1。</p>
<p>　　2）对修改后的RIP报文中的每个项目，执行如下步骤。</p>
<p>　　a.当原来的路由表中没有目的网络N时，把该项目添加到路由表中。</p>
<p>　　b.当原来的路由表中有目的网络N，且下一跳路由器地址是X时，用收到的项目替换原路由表中的项目。</p>
<p>　　c.当原来的路由表中有目的网络N，且下一跳地址不是X时，选择距离较小的更新。</p>
<p>　　3）如果180 秒（RIP 默认超时时间为 180秒）还没有收到相邻路由器的更新路由器，那么把此相邻路由器记为不可达路由器。</p>
<p>　　</p>
<p>　　RIP最大优点是实现简单、开销小、收敛过程较快。</p>
<p>　　RIP缺点如下：</p>
<p>　　a.限制了网络的规模</p>
<p>　　b.路由器之间交换的是路由器中的完整路由表因此网络规模越大，开销也越大。</p>
<p>　　c.网络出现故障时，会出现慢收敛现象（需要较长时间才能将此信息传到所有路由器）俗称坏消息传的慢。</p>
<p>　　</p>
<h4 id="开放最短路径优先（OSPF）协议"><a href="#开放最短路径优先（OSPF）协议" class="headerlink" title="开放最短路径优先（OSPF）协议"></a>开放最短路径优先（OSPF）协议</h4><h5 id="OSPF-和-RIP-的区别。"><a href="#OSPF-和-RIP-的区别。" class="headerlink" title="OSPF 和 RIP 的区别。"></a>OSPF 和 RIP 的区别。</h5><p>　　a.OSPF 向本自治系统中的所有路由器发送信息，使用的是洪泛法。RIP仅向临近的路由器发送信息。</p>
<p>　　b.发送的信息是与本路由器相邻的所有路由器的链路状态，但这只是部分信息。RIP发送整个路由表。</p>
<p>　　c.只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息。</p>
<p>　　d.OSPF是网络层协议，它不使用UDP或TCP，而直接使用IP数据报传送（其IP数据报首部协议字段为89）.RIP是应用层协议，它在传输层使用UDP。</p>
<h5 id="OSPF-基本工作原理"><a href="#OSPF-基本工作原理" class="headerlink" title="OSPF 基本工作原理"></a>OSPF 基本工作原理</h5><p>　　各个路由器之间频繁地交换链路状态信息，所有路由器最终都能建立一个链路状态数据库。这个数据库就是全网的拓扑结构，它在全网范围内是一致的。每个路由器根据这个全网拓扑结构图，使用Dijkstra 最短路径算法计算从自己到各目的网络的最优路径，以此构造自己的路由表。当链路状态更新时需要重新计算。</p>
<p>　　注意：虽然使用Dijkstra算法能计算出完整的最优路径，但路由表中不会存储完整的路径，而只存储“下一跳”（只有到了下一跳路由器才能再知道下一跳怎样走）。</p>
<p>　　</p>
<p>　　OSPF 的五种分组类型：</p>
<p>　　a.问候分组，用来维持临站的可达性。</p>
<p>　　b.数据库描述分组，向临站给出自己的链路状态数据库中所有链路状态的摘要信息。</p>
<p>　　c.链路状态请求分组，向对方请求发送某些链路状态项目的详细信息。</p>
<p>　　d.链路状态更新分组，用洪泛法对全网更新链路状态。</p>
<p>　　e.链路状态确认分组，对链路更新分组的确认。</p>
<p>　　通常每隔10秒，每两个相邻路由器都要交换一次问候分组，以便知道哪些站可达。OSPF 还归档每隔一段时间就刷新数据库中的链路状态。</p>
<p>　　</p>
<h4 id="边界网关协议（BGP）"><a href="#边界网关协议（BGP）" class="headerlink" title="边界网关协议（BGP）"></a>边界网关协议（BGP）</h4><p>　　边界网关协议（Border Gateway Protocol，BGP）是不同自治系统的路由器之间交换路由信息的协议，是一种外部网关协议。只能尽力寻找一条能够到达目的网络且比较好的路由，而非寻找一条最佳路由。<strong>BGP 是应用层协议，它是基于TCP的。</strong></p>
<p>　　BGP的工作原理如下：每个自治系统的管理员要选择至少一个路由器作为该自治系统的“BGP”发言人。一个BGP发言人要与其他自治系统中的BGP发言人交换路由信息，就要先建立TCP连接。在此连接上交换BGP报文以建立BGP会话，在利用BGP会话交换路由信息。</p>
<p>　　BGP特点：1）BGP 交换路由信息的结点数量级是自治系统的数量级。2）每个自治系统中的BGP发言人数目是很少的。</p>
<p>　　BGP共使用4种报文：</p>
<p>　　1）打开报文。用来与相邻的另一个BGP发言人建立关系。</p>
<p>　　2）更新报文。用来发送某一路由的信息，以及要撤销的多条路由。</p>
<p>　　3）保活报文。用来确认打开报文并周期性地证实临站关系。</p>
<p>　　4）通知报文。用来发送检测到地差错。</p>
<p><img src="https://i.loli.net/2020/04/04/orCBvgIw8smXcWj.png" alt="img"></p>
<h3 id="IP-组播"><a href="#IP-组播" class="headerlink" title="IP 组播"></a><strong>IP 组播</strong></h3><h4 id="组播的概念"><a href="#组播的概念" class="headerlink" title="组播的概念"></a>组播的概念</h4><p>　　人们所需要的组播机制是让源计算机一次发送的单个分组可以抵达用一个组标识的若干目标主机，并被它们正确接收。</p>
<p>　　组播一定仅应用于UDP。主机使用一个称为IGMP（因特网组管理协议）的协议加入组播组。主机在组播时仅发送一份数据，只有数据在传送路径出现分岔时才将分组复制后继续转发。组播需要路由器的支持。</p>
<h4 id="IP-组播地址"><a href="#IP-组播地址" class="headerlink" title="IP 组播地址"></a>IP 组播地址</h4><p>　　IP 组播使用 D类地址格式。D类地址前四位是1110，因此D类地址范围是 224.0.0.0 ~ 239.255.255.255.每个D类地址标志一个组播组。</p>
<p>　　组播数据报与一般IP数据报的区别是，前者使用D类IP 地址作为目的地址，并且首部中的协议字段值是2，表明使用IGMP。需要注意的是：</p>
<p>　　1）组播数据报也是“尽最大努力交付”，不提供可靠交付。</p>
<p>　　2）组播地址只能用于目的地址，而不能用于源地址。</p>
<p>　　3）对组播数据报不产生ICMP差错报文。</p>
<p>　　4）并非所有D类地址都可以作为组播地址。</p>
<p><img src="https://i.loli.net/2020/04/04/ev5FiWZCnjNrbsV.png" alt="img"></p>
<h4 id="IGMP-与组播路由算法"><a href="#IGMP-与组播路由算法" class="headerlink" title="IGMP 与组播路由算法"></a>IGMP 与组播路由算法</h4><p>　　IGMP 应视为 TCP/IP 的一部分，其工作可分为两个阶段：</p>
<p>　　1）当某台主机加入新的组播组时，该主机应向组播组地址发送一个IGMP 报文，声明自己要称为该组的成员。</p>
<p>　　2）本地组播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否仍继续时组的成员。</p>
<p>　　</p>
<h3 id="移动IP"><a href="#移动IP" class="headerlink" title="移动IP"></a><strong>移动IP</strong></h3><h4 id="移动-IP-的概念"><a href="#移动-IP-的概念" class="headerlink" title="移动 IP 的概念"></a>移动 IP 的概念</h4><p>　　支持移动性的因特网体系结构与协议共称移动IP。它是为了满足移动结点在移动中保持其连接性而设计的。</p>
<p>　　基于IPv4 的移动IP定义三种功能实体：移动结点、本地代理和外部代理。本地代理和外部代理又称为移动代理。</p>
<p>　　1）移动结点。具有永久IP地址的移动结点。</p>
<p>　　2）本地代理。在一个网络环境中，一个移动结点的永久“居所”被称为归属网络，在归属网络中代表移动结点执行移动管理功能的实体称为本地代理。</p>
<p>　　3）外部代理。在外部网络中帮助移动结点完成移动管理功能的实体称为外部代理。</p>
<h4 id="移动IP通信过程"><a href="#移动IP通信过程" class="headerlink" title="移动IP通信过程"></a>移动IP通信过程</h4><p>　　移动IP为移动主机设置了两个IP地址，即主地址和辅地址。移动主机在本地网时，使用的是主地址。当移动到另一个网络时，需要获得一个临时的辅地址，但此时主地址仍不变，从外网移回本地网时，辅地址改变或撤销，主地址仍然保持不变。</p>
<h3 id="网络层设备"><a href="#网络层设备" class="headerlink" title="网络层设备"></a>网络层设备</h3><h4 id="路由器的组成和功能"><a href="#路由器的组成和功能" class="headerlink" title="路由器的组成和功能"></a>路由器的组成和功能</h4><p>　　路由器是一种具有多个输入/输出端口的专用计算机，其任务是连接异构网络并完成路由转发，在多个逻辑网络互联时必须使用路由器。如果源主机和目的主机在同一个网络上，那么直接交付而无需通过路由器。如果源主机和目的网络不在同一各网络上，路由器按照转发表指出的路由将数据报转发给下一个路由器，称为间接交付。</p>
<p>　　路由器由路由选择和分组转发两部分构成。路由器是网络层设备，它实现了网络模型的下三层。如果一个存储转发设备实现了某个层次的功能，那么它就可以互联两个在该层次上使用不同协议的网段。例如网桥实现了物理层和数据链路，网桥就可以互联两个物理层和数据链路层不同的网段。</p>
<p>　　路由选择部分也称控制部分，其核心构件是路由选择处理机。</p>
<p><img src="https://i.loli.net/2020/04/04/EBMz9khK71uWvjy.png" alt="img"></p>
<h4 id="路由表与路由转发"><a href="#路由表与路由转发" class="headerlink" title="路由表与路由转发"></a>路由表与路由转发</h4><p><img src="https://i.loli.net/2020/04/04/SQFZdbVO8KBNiDj.png" alt="img"></p>
<h3 id="本章小结及疑难点"><a href="#本章小结及疑难点" class="headerlink" title="本章小结及疑难点"></a>本章小结及疑难点</h3><h4 id="“尽最大努力交付”有哪些含义？"><a href="#“尽最大努力交付”有哪些含义？" class="headerlink" title="“尽最大努力交付”有哪些含义？"></a>“尽最大努力交付”有哪些含义？</h4><p>​    1）不保证源主机发送的 IP 数据报一定无差错地交付到目的主机。</p>
<p>​    2）不保证源主机发送的 IP 数据报都在某一规定 的时间内交付到目的主机。</p>
<p>​    3）不保证源主机发送的 IP 数据报一定按发送时的顺序交付到目的主机。</p>
<p>​    4）不保证源主机发送的 IP 数据报不会重复交付给目的主机。</p>
<p>​    5）不故意丢弃 IP 数据报。丢弃 IP 数据报的情况是：<strong>路由器检测出首部校验和有错误；或由于网络中通信量过大，路由器或目的主机中的缓存已无存储空间。</strong></p>
<p><strong>交付目的主机的 IP 数据报都是 IP 数据报的首部没有出现差错或没有检测出来有差错的。</strong></p>
<p>​    总结：尽最大努力交付不保证 IP 数据报：无差错、准时到达、按序到达、不会重复交付。丢弃数据报的情况：缓存满。</p>
<h4 id="在互联网中，能否使用一个很大的交换机来代替全部的路由器？"><a href="#在互联网中，能否使用一个很大的交换机来代替全部的路由器？" class="headerlink" title="在互联网中，能否使用一个很大的交换机来代替全部的路由器？"></a>在互联网中，能否使用一个很大的交换机来代替全部的路由器？</h4><p>​        不行。交换机和路由器的功能是很不一样的。交换机和在一个单个的网络中和若干个计算机相连，并且可以将一个计算机发送过来的帧转发给另一个计算机。从这点上看，交换机具有集线器的转发帧的功能。但交换机比集线器的功能强很多。集线器在同一时间只允许一个计算机和其他计算机进行通信，但交换机允许多个计算机同时进行通信。</p>
<p>​        路由器连接两个或几个网络，路由器可在网络之间转发分组（即 IP 数据报）。这些互联的网络是异构的。如果存在异构网络互联，使用交换机是不行的。</p>
<h4 id="当运行-PING-127-0-0-1-时，这个-IP-数据报将发给谁？"><a href="#当运行-PING-127-0-0-1-时，这个-IP-数据报将发给谁？" class="headerlink" title="当运行 PING 127.0.0.1 时，这个 IP 数据报将发给谁？"></a>当运行 PING 127.0.0.1 时，这个 IP 数据报将发给谁？</h4><p>​        127.0.0.1 是环回地址。主机将测试用的 IP 数据报发给本主机的 ICMP（而不是发送到互联网上）以便进行环回测试。</p>
<h4 id="全-1-的-IP-地址是否是向整个互联网进行广播的一种地址？"><a href="#全-1-的-IP-地址是否是向整个互联网进行广播的一种地址？" class="headerlink" title="全 1 的 IP 地址是否是向整个互联网进行广播的一种地址？"></a>全 1 的 IP 地址是否是向整个互联网进行广播的一种地址？</h4><p>​        不是。在 IP 地址中的全 1 地址表示仅在本网络上（发送这个 IP 数据报的主机所连局域网）进行广播。这种广播叫做受限的广播。如果网络号是具体的网络号，主机号全 1 叫做定向广播，这是对某一个具体的网络（网络号指明的网络）上的所有主机进行广播的一种地址。</p>
<h4 id="IP-协议有分片的功能，但广域网中的分组则不必分片。这是为什么？"><a href="#IP-协议有分片的功能，但广域网中的分组则不必分片。这是为什么？" class="headerlink" title="IP 协议有分片的功能，但广域网中的分组则不必分片。这是为什么？"></a>IP 协议有分片的功能，但广域网中的分组则不必分片。这是为什么？</h4><p>​        IP 数据报可能要经过许多个网络，而源主机事先并不知道后面要经过的这些网络中分组的最大长度是多少，当超过某个网络的最大长度限制时就需要分片。</p>
<p>​        广域网能够通过的分组的最大长度是该广域网中所有主机都事先知道的，源主机不可能发送网络不支持的过长分组。</p>
<h4 id="链路层广播和-IP-广播有何区别？"><a href="#链路层广播和-IP-广播有何区别？" class="headerlink" title="链路层广播和 IP 广播有何区别？"></a>链路层广播和 IP 广播有何区别？</h4><p>​        链路层广播使用数据链路层协议，在一个以太网史昂实现对该局域网上所有主机的 MAC 帧进行广播。</p>
<p>​        IP 广播则是用 IP 协议，通过互联网实现的对一个网络上的所有主机的 IP 数据报广播。</p>
<h4 id="当路由器利用-IP-数据报首部中的-“首部校验和”-字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个-ICMP-报文给源主机呢？"><a href="#当路由器利用-IP-数据报首部中的-“首部校验和”-字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个-ICMP-报文给源主机呢？" class="headerlink" title="当路由器利用 IP 数据报首部中的 “首部校验和” 字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个 ICMP 报文给源主机呢？"></a>当路由器利用 IP 数据报首部中的 “首部校验和” 字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个 ICMP 报文给源主机呢？</h4><p>​        IP 协议并不要求源主机重传有差错的数据报。保证无差错传输是由 TCP 协议完成的。另一方面，首部校验和只能校验出 IP 数据报的首部是否出现差错，但不知道首部中的源地址字段有没有出错，如果出错，将数据报传到错误的地址也是无意义的。</p>
<h4 id="有人认为，不使用-CIDR-也行。例如，使用-CIDR-时，给某单位分配了一个地址块-20，相当于-16-个-C-类地址块。如果不使用-CIDR-，而直接给该单位分配-16-个-C-类地址块，那么在效果上不是一样吗？"><a href="#有人认为，不使用-CIDR-也行。例如，使用-CIDR-时，给某单位分配了一个地址块-20，相当于-16-个-C-类地址块。如果不使用-CIDR-，而直接给该单位分配-16-个-C-类地址块，那么在效果上不是一样吗？" class="headerlink" title="有人认为，不使用 CIDR 也行。例如，使用 CIDR 时，给某单位分配了一个地址块 /20，相当于 16 个 C 类地址块。如果不使用 CIDR ，而直接给该单位分配 16 个 C 类地址块，那么在效果上不是一样吗？"></a>有人认为，不使用 CIDR 也行。例如，使用 CIDR 时，给某单位分配了一个地址块 /20，相当于 16 个 C 类地址块。如果不使用 CIDR ，而直接给该单位分配 16 个 C 类地址块，那么在效果上不是一样吗？</h4><p>​        如果不采用 CIDR ，而直接分配 16 个 C 类地址块，相当于给该单位分配了 16 个 C 类网络。这个单位对外界来说，是 16 个 C 类网络。每一个 C 类网络都要在本单位外面的路由表中占有一个表项，使得路由表更大了。当本单位内的许多主机相互通信时，由于跨越了不同的网络，都必须使用路由器来转发 IP 数据报，开销增大。</p>
<h4 id="IP-数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用-CRC-校验码？"><a href="#IP-数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用-CRC-校验码？" class="headerlink" title="IP 数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用 CRC 校验码？"></a>IP 数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用 CRC 校验码？</h4><p>​        优点是不校验数据部分可以加快分组转发的速度，缺点是数据部分出现差错不能及早发现，由上层检查数据是否出错。不使用 CRC 可减少路由器进行校验的时间。</p>
<p><img src="https://i.loli.net/2020/04/11/rPoZzSghkIDjyR6.png" alt="image-20200411110119434"></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/04/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F--%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/" rel="prev" title="命令模式">
      <i class="fa fa-chevron-left"></i> 命令模式
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/04/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F--%E8%BF%87%E6%BB%A4%E5%99%A8%E6%A8%A1%E5%BC%8F/" rel="next" title="过滤器模式">
      过滤器模式 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层的功能"><span class="nav-number">1.</span> <span class="nav-text">网络层的功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#异构网络互联"><span class="nav-number">1.1.</span> <span class="nav-text">异构网络互联</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#路由与转发"><span class="nav-number">1.2.</span> <span class="nav-text">路由与转发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#拥塞控制"><span class="nav-number">1.3.</span> <span class="nav-text">拥塞控制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由算法"><span class="nav-number">2.</span> <span class="nav-text">路由算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#静态路由与动态路由"><span class="nav-number">2.1.</span> <span class="nav-text">静态路由与动态路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#距离-向量路由算法"><span class="nav-number">2.2.</span> <span class="nav-text">距离-向量路由算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链路状态路由算法"><span class="nav-number">2.3.</span> <span class="nav-text">链路状态路由算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#层次路由"><span class="nav-number">2.4.</span> <span class="nav-text">层次路由</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv4"><span class="nav-number">3.</span> <span class="nav-text">IPv4</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv4分组"><span class="nav-number">3.1.</span> <span class="nav-text">IPv4分组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv4地址与NAT"><span class="nav-number">3.2.</span> <span class="nav-text">IPv4地址与NAT</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#IPv4-地址"><span class="nav-number">3.2.1.</span> <span class="nav-text">IPv4 地址</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#网络地址转换"><span class="nav-number">3.2.2.</span> <span class="nav-text">网络地址转换</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子网划分与子网掩码、CIDR"><span class="nav-number">3.3.</span> <span class="nav-text">子网划分与子网掩码、CIDR</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#子网划分"><span class="nav-number">3.3.1.</span> <span class="nav-text">子网划分</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#子网掩码"><span class="nav-number">3.3.2.</span> <span class="nav-text">子网掩码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#无分类域间路由选择（CIDR）"><span class="nav-number">3.3.3.</span> <span class="nav-text">无分类域间路由选择（CIDR）</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP、DHCP与ICMP"><span class="nav-number">3.4.</span> <span class="nav-text">ARP、DHCP与ICMP</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6"><span class="nav-number">4.</span> <span class="nav-text">IPv6</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv6-特点"><span class="nav-number">4.1.</span> <span class="nav-text">IPv6 特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IPv6-地址"><span class="nav-number">4.2.</span> <span class="nav-text">IPv6 地址</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#路由协议"><span class="nav-number">5.</span> <span class="nav-text">路由协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#自治系统"><span class="nav-number">5.1.</span> <span class="nav-text">自治系统</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#域内路由和域间路由"><span class="nav-number">5.2.</span> <span class="nav-text">域内路由和域间路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#路由信息协议（RIP）"><span class="nav-number">5.3.</span> <span class="nav-text">路由信息协议（RIP）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#开放最短路径优先（OSPF）协议"><span class="nav-number">5.4.</span> <span class="nav-text">开放最短路径优先（OSPF）协议</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#OSPF-和-RIP-的区别。"><span class="nav-number">5.4.1.</span> <span class="nav-text">OSPF 和 RIP 的区别。</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#OSPF-基本工作原理"><span class="nav-number">5.4.2.</span> <span class="nav-text">OSPF 基本工作原理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#边界网关协议（BGP）"><span class="nav-number">5.5.</span> <span class="nav-text">边界网关协议（BGP）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP-组播"><span class="nav-number">6.</span> <span class="nav-text">IP 组播</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#组播的概念"><span class="nav-number">6.1.</span> <span class="nav-text">组播的概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP-组播地址"><span class="nav-number">6.2.</span> <span class="nav-text">IP 组播地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IGMP-与组播路由算法"><span class="nav-number">6.3.</span> <span class="nav-text">IGMP 与组播路由算法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移动IP"><span class="nav-number">7.</span> <span class="nav-text">移动IP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#移动-IP-的概念"><span class="nav-number">7.1.</span> <span class="nav-text">移动 IP 的概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#移动IP通信过程"><span class="nav-number">7.2.</span> <span class="nav-text">移动IP通信过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络层设备"><span class="nav-number">8.</span> <span class="nav-text">网络层设备</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#路由器的组成和功能"><span class="nav-number">8.1.</span> <span class="nav-text">路由器的组成和功能</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#路由表与路由转发"><span class="nav-number">8.2.</span> <span class="nav-text">路由表与路由转发</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#本章小结及疑难点"><span class="nav-number">9.</span> <span class="nav-text">本章小结及疑难点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#“尽最大努力交付”有哪些含义？"><span class="nav-number">9.1.</span> <span class="nav-text">“尽最大努力交付”有哪些含义？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#在互联网中，能否使用一个很大的交换机来代替全部的路由器？"><span class="nav-number">9.2.</span> <span class="nav-text">在互联网中，能否使用一个很大的交换机来代替全部的路由器？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#当运行-PING-127-0-0-1-时，这个-IP-数据报将发给谁？"><span class="nav-number">9.3.</span> <span class="nav-text">当运行 PING 127.0.0.1 时，这个 IP 数据报将发给谁？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#全-1-的-IP-地址是否是向整个互联网进行广播的一种地址？"><span class="nav-number">9.4.</span> <span class="nav-text">全 1 的 IP 地址是否是向整个互联网进行广播的一种地址？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP-协议有分片的功能，但广域网中的分组则不必分片。这是为什么？"><span class="nav-number">9.5.</span> <span class="nav-text">IP 协议有分片的功能，但广域网中的分组则不必分片。这是为什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链路层广播和-IP-广播有何区别？"><span class="nav-number">9.6.</span> <span class="nav-text">链路层广播和 IP 广播有何区别？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#当路由器利用-IP-数据报首部中的-“首部校验和”-字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个-ICMP-报文给源主机呢？"><span class="nav-number">9.7.</span> <span class="nav-text">当路由器利用 IP 数据报首部中的 “首部校验和” 字段检测出在传输过程中出现了差错时，就简单地将其丢弃。为什么不发送一个 ICMP 报文给源主机呢？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#有人认为，不使用-CIDR-也行。例如，使用-CIDR-时，给某单位分配了一个地址块-20，相当于-16-个-C-类地址块。如果不使用-CIDR-，而直接给该单位分配-16-个-C-类地址块，那么在效果上不是一样吗？"><span class="nav-number">9.8.</span> <span class="nav-text">有人认为，不使用 CIDR 也行。例如，使用 CIDR 时，给某单位分配了一个地址块 &#x2F;20，相当于 16 个 C 类地址块。如果不使用 CIDR ，而直接给该单位分配 16 个 C 类地址块，那么在效果上不是一样吗？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IP-数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用-CRC-校验码？"><span class="nav-number">9.9.</span> <span class="nav-text">IP 数据报中的首部校验和并不检验数据报中的数据，这样做的优缺点是什么？计算首部校验和为什么不使用 CRC 校验码？</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="hoo334"
      src="/images/avatar2.jpg">
  <p class="site-author-name" itemprop="name">hoo334</p>
  <div class="site-description" itemprop="description">To be a better man</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">132</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hoo334" title="Github → https:&#x2F;&#x2F;github.com&#x2F;hoo334" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>Github</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liminghu98@foxmail.com" title="E-Mail → mailto:liminghu98@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hoo334</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
